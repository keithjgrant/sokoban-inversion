(function(){define("config",[],function(){var t;return t={W:87,A:65,S:83,D:68,UP_ARROW:38,DOWN_ARROW:40,LEFT_ARROW:37,RIGHT_ARROW:39,ESC:27,ENTER:13,SPACEBAR:32},{containerId:"si-stage",blockSize:32,columns:16,rows:12,debug:!0,debugVerbose:!1,controls:{up:[t.W,t.UP_ARROW],down:[t.S,t.DOWN_ARROW],left:[t.A,t.LEFT_ARROW],right:[t.D,t.RIGHT_ARROW],esc:[t.ESC],select:[t.ENTER,t.SPACEBAR]}}})}).call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("UserInput",["config"],function(e){var n;return n=function(){function n(e){this.eventBus=e,this._handleKeyUp=t(this._handleKeyUp,this),this._handleKeyDown=t(this._handleKeyDown,this),this._generateKeymap(),this._registerInputEvents()}return n.prototype._generateKeymap=function(){var t,n,r,o,i;this.keymap={},o=e.controls,i=[];for(n in o)r=o[n],i.push(function(){var e,o,i;for(i=[],e=0,o=r.length;o>e;e++)t=r[e],i.push(this.keymap[t]=n);return i}.call(this));return i},n.prototype._registerInputEvents=function(){return document.addEventListener("keydown",this._handleKeyDown),document.addEventListener("keyup",this._handleKeyUp)},n.prototype._handleKeyDown=function(t){return this._triggerEvent("keydown",t.keyCode)},n.prototype._handleKeyUp=function(t){return this._triggerEvent("keyup",t.keyCode)},n.prototype._triggerEvent=function(t){var e;return e=this.keymap[event.keyCode],e?this.eventBus.trigger("user:"+t+":"+e):void 0},n}()})}.call(this),function(){define("renderers/TitleScreenRenderer",[],function(){var t;return t=function(){function t(t,e){this.eventBus=t,this.container=e,this._createTitle(),this._createByline(),this._createBeginButton()}return t.prototype._createTitle=function(){return this.container.appendChild(this._createDiv("Sokoban","title title-sokoban")),this.container.appendChild(this._createDiv("Inversion","title title-inversion"))},t.prototype._createByline=function(){return this.container.appendChild(this._createDiv("an Elucid Blue game","byline"))},t.prototype._createBeginButton=function(){var t,e=this;return t=this._createDiv("Start","button button-start"),t.addEventListener("click",function(){return e.eventBus.trigger("scene:load:levelSelect")}),this.container.appendChild(t)},t.prototype._createDiv=function(t,e){var n;return n=document.createElement("div"),n.innerHTML=t,n.className=e,n},t}()})}.call(this),function(){define("scenes/TitleScene",["renderers/TitleScreenRenderer"],function(t){var e;return e=function(){function e(t,e){this.eventBus=t,this.container=e,this._initRenderer()}return e.prototype._initRenderer=function(){return this.renderer=new t(this.eventBus,this.container)},e}()})}.call(this),function(){define("scenes/LevelSelectScene",[],function(){var t;return t=function(){function t(t){this.eventBus=t}return t}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("entities/BlockGrid",[],function(){var e;return e=function(){function e(e){this.eventBus=e,this._handlePlayerMovement=t(this._handlePlayerMovement,this),this.blocks=[],this.eventBus.on("player:movement",this._handlePlayerMovement)}return e.prototype.addBlock=function(t){var e,n;return e=t.getColumn(),n=t.getRow(),this.blocks[n]||(this.blocks[n]=[]),this.blocks[n][e]=t},e.prototype.findBlock=function(t,e){var n,r;return t instanceof Array&&(n=t,t=n[0],e=n[1]),(null!=(r=this.blocks[e])?r[t]:void 0)||null},e.prototype._handlePlayerMovement=function(t){return this._playerCanStep(t)?t.resolveStep():this._attemptPush(t)?t.resolvePush():t.reject()},e.prototype._playerCanStep=function(t){var e,n;return n=this.findBlock(t.getOriginCoords()),e=this.findBlock(t.getDestinationCoords()),n.getColor()===(null!=e?e.getColor():void 0)?!0:n.isGateway()||(null!=e?e.isGateway():void 0)?!0:!1},e.prototype._attemptPush=function(t){var e,n,r,o;return r=this.findBlock(t.getOriginCoords()),e=this.findBlock(t.getDestinationCoords()),o=this.findBlock(t.getNextCoords()),this._canPush(r,e,o)?(n=e.getCoords(),e.moveTo(o.getCoords()),o.pushOverTo(n),this._updateBlockPosition(e),this._updateBlockPosition(o),!0):!1},e.prototype._canPush=function(t,e,n){var r,o,i;return e.isPushable()?(o=t.getColor(),r=null!=e?e.getColor():void 0,i=null!=n?n.getColor():void 0,o!==r&&o===i):!1},e.prototype._updateBlockPosition=function(t){var e,n;return e=t.getColumn(),n=t.getRow(),this.blocks[n][e]=t},e}()})}.call(this),function(){define("Level",["entities/BlockGrid"],function(t){var e;return e=function(){function e(e){this.eventBus=e,this.blocks=new t(this.eventBus),this.goals=[]}return e.prototype.setPlayer=function(t){this.player=t},e.prototype.getPlayer=function(){return this.player},e.prototype.addBlock=function(t){return this.blocks.addBlock(t)},e.prototype.getBlockGrid=function(){return this.blocks},e.prototype.addGoal=function(t){return this.goals.push(t)},e.prototype.getGoals=function(){return this.goals},e.prototype.isComplete=function(){var t,e,n,r,o;for(o=this.goals,e=n=0,r=o.length;r>n;e=++n)if(t=o[e],!t.isSatisfied(this.blocks))return!1;return!0},e}()})}.call(this),function(){define("entities/Block",[],function(){var t;return t=function(){function t(t,e){this.col=t,this.row=e}return t.prototype.getCoords=function(){return[this.col,this.row]},t.prototype.getColumn=function(){return this.col},t.prototype.getRow=function(){return this.row},t.prototype.isPushable=function(){return!1},t.prototype.isGateway=function(){return!1},t}()})}.call(this),function(){define("entities/colors",[],function(){var t;return t={WHITE:"white",BLUE:"blue",RED:"red",WALL:"wall",GATEWAY:"gateway"}})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function r(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};define("entities/Wall",["entities/Block","entities/colors"],function(t,n){var r,o;return r=function(t){function r(){return o=r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.isPushable=function(){return!1},r.prototype.getColor=function(){return n.WALL},r}(t)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function r(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};define("entities/PushableBlock",["entities/Block"],function(t){var n,r;return n=function(t){function n(){return r=n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.setKeystone=function(t){this._isKeystone=null!=t?t:!0},n.prototype.isKeystone=function(){return this._isKeystone||!1},n.prototype.setColor=function(t){this.color=t},n.prototype.getColor=function(){return this.color},n.prototype.isPushable=function(){return!0},n.prototype.canPushNorth=function(){return this._canPush(this.south,this.north)},n.prototype.canPushSouth=function(){return this._canPush(this.south,this.north)},n.prototype.canPushEast=function(){return this._canPush(this.west,this.east)},n.prototype.canPushWest=function(){return this._canPush(this.east,this.west)},n.prototype._canPush=function(t,e){return this.getColor()===e.getColor()?!1:t.getColor()!==e.getColor()?!1:!0},n.prototype.moveTo=function(t){return this.col=t[0],this.row=t[1],t},n.prototype.pushOverTo=function(t){return this.moveTo(t)},n}(t)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function r(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};define("entities/Gateway",["entities/Block","entities/colors"],function(t,n){var r,o;return r=function(t){function r(){return o=r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.isPushable=function(){return!1},r.prototype.isGateway=function(){return!0},r.prototype.getColor=function(){return n.GATEWAY},r}(t)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("parser/BlockFactory",["entities/Wall","entities/PushableBlock","entities/Gateway","entities/colors"],function(e,n,r,o){var i;return i=function(){function i(){this._createGateway=t(this._createGateway,this),this._createPushableRedKeystone=t(this._createPushableRedKeystone,this),this._createPushableRed=t(this._createPushableRed,this),this._createPushableBlueKeystone=t(this._createPushableBlueKeystone,this),this._createPushableBlue=t(this._createPushableBlue,this),this._createPushableWhiteKeystone=t(this._createPushableWhiteKeystone,this),this._createPushableWhite=t(this._createPushableWhite,this),this._createWall=t(this._createWall,this),this.blockByChar={w:this._createWall,a:this._createPushableWhite,A:this._createPushableWhiteKeystone,b:this._createPushableBlue,B:this._createPushableBlueKeystone,c:this._createPushableRed,C:this._createPushableRedKeystone,g:this._createGateway}}return i.prototype.createBlock=function(t,e,n){var r;return r=this.blockByChar[t],r||(console.error("Unrecognized block type: "+t),r=this._createWall),r(e,n)},i.prototype._createWall=function(t,n){return new e(t,n)},i.prototype._createPushableWhite=function(t,e){var r;return r=new n(t,e),r.setColor(o.WHITE),r},i.prototype._createPushableWhiteKeystone=function(t,e){var n;return n=this._createPushableWhite(t,e),n.setKeystone(),n},i.prototype._createPushableBlue=function(t,e){var r;return r=new n(t,e),r.setColor(o.BLUE),r},i.prototype._createPushableBlueKeystone=function(t,e){var n;return n=this._createPushableBlue(t,e),n.setKeystone(),n},i.prototype._createPushableRed=function(t,e){var r;return r=new n(t,e),r.setColor(o.RED),r},i.prototype._createPushableRedKeystone=function(t,e){var n;return n=this._createPushableRed(t,e),n.setKeystone(),n},i.prototype._createGateway=function(t,e){return new r(t,e)},i}()})}.call(this),function(){define("entities/Goal",[],function(){var t;return t=function(){function t(t,e){this.col=t,this.row=e}return t.prototype.getCoords=function(){return[this.col,this.row]},t.prototype.getColumn=function(){return this.col},t.prototype.getRow=function(){return this.row},t.prototype.setColor=function(t){this.color=t},t.prototype.getColor=function(){return this.color},t.prototype.isSatisfied=function(t){var e;return e=t.findBlock(this.col,this.row),e?e.isKeystone()&&e.getColor()===this.getColor():!1},t}()})}.call(this),function(){define("parser/GoalFactory",["entities/Goal","entities/colors"],function(t,e){var n;return n=function(){function n(){this.goalByChar={w:this._createWhite,b:this._createBlue,r:this._createRed}}return n.prototype.createGoal=function(t,e,n){var r;return r=this.goalByChar[t],r(e,n)},n.prototype._createWhite=function(n,r){var o;return o=new t(n,r),o.setColor(e.WHITE),o},n.prototype._createBlue=function(n,r){var o;return o=new t(n,r),o.setColor(e.BLUE),o},n.prototype._createRed=function(n,r){var o;return o=new t(n,r),o.setColor(e.RED),o},n}()})}.call(this),function(){define("PlayerMovementEvent",[],function(){var t,e;return e={PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"},t=function(){function t(t,n){this.originCoords=t,this.coordDeltas=n,this.state=e.PENDING,this.blockPushed=!1,this.onSuccess=[],this.onFailure=[]}return t.prototype.getState=function(){return this.state},t.prototype.getOriginCoords=function(){return this.originCoords},t.prototype.getDestinationCoords=function(){var t,e;return t=this.originCoords[0]+this.coordDeltas[0],e=this.originCoords[1]+this.coordDeltas[1],[t,e]},t.prototype.getNextCoords=function(){var t,e;return t=this.originCoords[0]+2*this.coordDeltas[0],e=this.originCoords[1]+2*this.coordDeltas[1],[t,e]},t.prototype.resolve=function(){var t,n,r,o,i;for(this.state=e.RESOLVED,o=this.onSuccess,i=[],n=0,r=o.length;r>n;n++)t=o[n],i.push(t(this));return i},t.prototype.resolveStep=function(){return this.blockPushed=!1,this.resolve()},t.prototype.resolvePush=function(){return this.blockPushed=!0,this.resolve()},t.prototype.isBlockPushed=function(){return this.blockPushed},t.prototype.reject=function(){var t,n,r,o,i;for(this.state=e.REJECTED,o=this.onFailure,i=[],n=0,r=o.length;r>n;n++)t=o[n],i.push(t(this));return i},t.prototype.done=function(t){return this.state===e.PENDING?this.onSuccess.push(t):this.state===e.RESOLVED?t(this):void 0},t.prototype.fail=function(t){return this.state===e.PENDING?this.onFailure.push(t):this.state===e.REJECTED?t(this):void 0},t.prototype.then=function(t,e){return this.done(t),this.fail(e)},t}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("entities/Player",["PlayerMovementEvent"],function(e){var n;return n=function(){function n(e,n,r){this.eventBus=e,this.col=n,this.row=r,this._handleMovementDone=t(this._handleMovementDone,this),this._handleMovementFailure=t(this._handleMovementFailure,this),this._moveWest=t(this._moveWest,this),this._moveSouth=t(this._moveSouth,this),this._moveEast=t(this._moveEast,this),this._moveNorth=t(this._moveNorth,this),this.isMoving=!1,this.eventBus.on("user:keydown:up",this._moveNorth),this.eventBus.on("user:keydown:right",this._moveEast),this.eventBus.on("user:keydown:down",this._moveSouth),this.eventBus.on("user:keydown:left",this._moveWest)}return n.prototype.getCoords=function(){return[this.col,this.row]},n.prototype.getColumn=function(){return this.col},n.prototype.getRow=function(){return this.row},n.prototype._moveNorth=function(){return this._move(0,-1)},n.prototype._moveEast=function(){return this._move(1,0)},n.prototype._moveSouth=function(){return this._move(0,1)},n.prototype._moveWest=function(){return this._move(-1,0)},n.prototype._move=function(t,n){var r;return this.isMoving=!0,r=new e(this.getCoords(),[t,n]),r.then(this._handleMovementDone,this._handleMovementFailure),this.col+=t,this.row+=n,this.eventBus.trigger("player:movement",r)},n.prototype._handleMovementFailure=function(t){var e;return e=t.getOriginCoords(),this.col=e[0],this.row=e[1],this.isMoving=!1},n.prototype._handleMovementDone=function(){return this.isMoving=!1},n}()})}.call(this),function(){define("parser/LevelParser",["Level","parser/BlockFactory","parser/GoalFactory","entities/Player"],function(t,e,n,r){var o;return o=function(){function o(t){this.eventBus=t,this.blockFactory=new e,this.goalFactory=new n}return o.prototype.parse=function(e){return this.data=e,this.level=new t(this.eventBus),this._parseBlocks(),this._parseGoals(),this._parsePlayer(),this.level},o.prototype._parseBlocks=function(){var t,e,n,r,o,i,s,a,u;for(a=this.data.blocks,u=[],o=i=0,s=a.length;s>i;o=++i)r=a[o],u.push(function(){var i,s,a;for(a=[],n=i=0,s=r.length-1;s>=0?s>=i:i>=s;n=s>=0?++i:--i)e=r[n],t=this.blockFactory.createBlock(e,n,o),a.push(this.level.addBlock(t));return a}.call(this));return u},o.prototype._parseGoals=function(){var t,e,n,r,o,i,s,a,u;for(a=this.data.goals,u=[],i=0,s=a.length;s>i;i++)n=a[i],e=n[0],o=n[1],t=n[2],r=this.goalFactory.createGoal(t,e,o),u.push(this.level.addGoal(r));return u},o.prototype._parsePlayer=function(){var t,e,n;return t=this.data.player[0],n=this.data.player[1],e=new r(this.eventBus,t,n),this.level.setPlayer(e)},o}()})}.call(this),function(){define("renderers/BlockRenderer",["config"],function(t){var e;return e=function(){function e(t,e){this.container=t,this.block=e}return e.prototype.render=function(){return this._initElement(),this._updatePosition()},e.prototype._initElement=function(){return this.element?void 0:(this.element=document.createElement("div"),this.element.className="block "+this._getBlockClass(),this.container.appendChild(this.element))},e.prototype._getBlockClass=function(){var t;return t="block-"+this.block.getColor(),this.block.isPushable()&&this.block.isKeystone()&&(t+="-keystone"),t},e.prototype._updatePosition=function(){var e,n;return e=this.block.getColumn()*t.blockSize,n=this.block.getRow()*t.blockSize,this.element.style.left=""+e+"px",this.element.style.top=""+n+"px",t.debugVerbose?(this.element.style.fontSize="8px",this.element.style.padding="2px",this.element.innerHTML=""+this.block.getColumn()+", "+this.block.getRow()):void 0},e}()})}.call(this),function(){define("renderers/GoalRenderer",["config"],function(t){var e;return e=function(){function e(t,e){this.container=t,this.goal=e}return e.prototype.render=function(){return this._initElement(),this._update()},e.prototype._initElement=function(){return this.element?void 0:(this.element=document.createElement("div"),this.element.className="goal "+this._getGoalClass(),this._setPosition(),this.container.appendChild(this.element))},e.prototype._getGoalClass=function(){return"goal-"+this.goal.getColor()},e.prototype._setPosition=function(){var e,n;return e=this.goal.getColumn()*t.blockSize,n=this.goal.getRow()*t.blockSize,this.element.style.left=""+e+"px",this.element.style.top=""+n+"px"},e.prototype._update=function(){},e}()})}.call(this),function(){define("renderers/transitionEnd",[],function(){var t;return t=function(){var t;return t=document.body.style,"undefined"!=typeof t.transition?"transitionend":"undefined"!=typeof t.webkitTransition?"webkitTransitionEnd":"undefined"!=typeof t.OTransition?"oTransitionEnd":""},t()})}.call(this),function(){define("renderers/PlayerRenderer",["renderers/transitionEnd","config"],function(t,e){var n;return n=function(){function n(t,e,n){this.eventBus=t,this.container=e,this.player=n}return n.prototype.render=function(){return this._initElement(),this._updatePosition()},n.prototype._initElement=function(){return this.element?void 0:(this.element=document.createElement("div"),this.element.className="player",this.container.appendChild(this.element),this._listenForTransitionEnd())},n.prototype._updatePosition=function(){var t,n;return t=this.player.getColumn()*e.blockSize,n=this.player.getRow()*e.blockSize,this.element.style.left=""+t+"px",this.element.style.top=""+n+"px"},n.prototype._listenForTransitionEnd=function(){var e=this;return t?this.element.addEventListener(t,function(){return e.eventBus.trigger("player:movement:complete")}):alert("Your browser is not supported")},n}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("renderers/LevelRenderer",["renderers/BlockRenderer","renderers/GoalRenderer","renderers/PlayerRenderer","config"],function(e,n,r,o){var i;return i=function(){function i(e,n,r){this.eventBus=e,this.container=n,this.level=r,this._handlePlayerMovement=t(this._handlePlayerMovement,this),this._renderPlayer=t(this._renderPlayer,this),this._createBlockRenderers(),this._createGoalRenderers(),this._createPlayerRenderer(),this.eventBus.on("player:movement",this._handlePlayerMovement)}return i.prototype._createBlockRenderers=function(){var t,e,n,r,i,s,a;for(this.blockRenderers=[],e=this.level.getBlockGrid(),a=[],n=i=0,s=o.columns-1;s>=0?s>=i:i>=s;n=s>=0?++i:--i)a.push(function(){var i,s,a;for(a=[],r=i=0,s=o.rows-1;s>=0?s>=i:i>=s;r=s>=0?++i:--i)t=e.findBlock(n,r),t?a.push(this._createBlockRenderer(t)):a.push(console.warn("No block found at ",[n,r]));return a}.call(this));return a},i.prototype._createBlockRenderer=function(t){var n;return n=new e(this.container,t),this.blockRenderers.push(n)},i.prototype._createGoalRenderers=function(){var t,e,r,o,i,s;for(this.goalRenderers=[],i=this.level.getGoals(),s=[],r=0,o=i.length;o>r;r++)t=i[r],e=new n(this.container,t),s.push(this.goalRenderers.push(e));return s},i.prototype._createPlayerRenderer=function(){var t;return t=this.level.getPlayer(),this.playerRenderer=new r(this.eventBus,this.container,t)},i.prototype.render=function(){return this._renderBlocks(),this._renderGoals(),this._renderPlayer()},i.prototype._renderBlocks=function(){var t,e,n,r,o;for(r=this.blockRenderers,o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(t.render());return o},i.prototype._renderGoals=function(){var t,e,n,r,o;for(r=this.goalRenderers,o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(t.render());return o},i.prototype._renderPlayer=function(){return this.playerRenderer.render()},i.prototype._handlePlayerMovement=function(t){var e=this;return t.done(function(){return e._renderPlayer(),t.isBlockPushed()?e._renderBlocks():void 0}),t.fail(this._renderPlayer)},i}()})}.call(this),function(){define("levels",[],function(){return[{blocks:["wwwwwwwwwwwwwwww","wwwwwwwwwwwwwwww","wwwaaaaagbabbwww","wwaabaBaaAbbbbww","wwaaawBabbwwAaww","wwawaawabwbbbbww","wwawaawabwbbbbww","wwaawaabbbwwaaww","wwaBaBaaAbAbbbww","wwwbaaagbbbbbwww","wwwwwwwwwwwwwwww","wwwwwwwwwwwwwwww"],goals:[[10,5,"w"],[10,6,"w"],[11,5,"w"],[11,6,"w"],[4,5,"b"],[4,6,"b"],[5,5,"b"],[5,6,"b"]],player:[2,5]},{blocks:["wwwwwwwwwwwwwwww","wwwwwwwwwwwwwwww","wwwwwaawaaawwwww","wwwwwaaBaaaaawww","wwwwaaawwBwaawww","wwwwaBawaawawwww","wwwwwwBwaawawwww","wwwwwwaBaaaawwww","wwwwwwBwawaawwww","wwwwwwaaawwwwwww","wwwwwwwwwwwwwwww","wwwwwwwwwwwwwwww"],goals:[[8,5,"b"],[8,6,"b"],[8,7,"b"],[9,5,"b"],[9,6,"b"],[9,7,"b"]],player:[6,7]},["wwwwwwwwwwwwwwww","wwwwwwwwwwwwwwww","wwwwwwwwwwwwwwww","wwwwwwwwwwwwwwww","wwwwwwwwwwwwwwww","wwwwwwwwwwwwwwww","wwwwwwwwwwwwwwww","wwwwwwwwwwwwwwww","wwwwwwwwwwwwwwww","wwwwwwwwwwwwwwww","wwwwwwwwwwwwwwww","wwwwwwwwwwwwwwww"]]})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("scenes/LevelScene",["parser/LevelParser","renderers/LevelRenderer","levels"],function(e,n,r){var o;return o=function(){function o(e,r,o){this.eventBus=e,this.container=r,this.levelNum=o,this._checkForLevelCompletion=t(this._checkForLevelCompletion,this),this._generateLevel(),this.renderer=new n(this.eventBus,this.container,this.level),this.renderer.render(),this.eventBus.on("player:movement:complete",this._checkForLevelCompletion)}return o.prototype._generateLevel=function(){var t,n;return t=r[this.levelNum],n=new e(this.eventBus),this.level=n.parse(t)},o.prototype._checkForLevelCompletion=function(){return this.level.isComplete()?(this.eventBus.trigger("level:complete"),this.renderer.renderCompleteDialog()):void 0},o}()})}.call(this),function(){define("Game",["UserInput","scenes/TitleScene","scenes/LevelSelectScene","scenes/LevelScene","config"],function(t,e,n,r,o){var i;return i=function(){function n(e){this.eventBus=e,this._initContainer(),this.loadTitleScene(),this.userInput=new t(this.eventBus),this._listenForSceneLoadEvents()}return n.prototype._listenForSceneLoadEvents=function(){return this.eventBus.on("scene:load:title",this.loadTitleScene),this.eventBus.on("scene:load:levelSelect",this.loadLevelSelectScene),this.eventBus.on("scene:load:level",this.loadLevelScene)},n.prototype._initContainer=function(){var t;return t=o.containerId,this.container=document.getElementById(t),this.container||(this.container=document.createElement("div"),this.container.id=t,document.body.appendChild(this.container)),this._emptyContainer()},n.prototype._emptyContainer=function(){return this.container.innerHTML=""},n.prototype.loadTitleScene=function(){return this._emptyContainer(),this.currentScene=new e(this.eventBus,this.container)},n.prototype.loadLevelSelectScene=function(){return this._emptyContainer()},n.prototype.loadLevelScene=function(t){return this._emptyContainer(),this.currentScene=new r(this.eventBus,this.container,t)},n}()})}.call(this),function(){define("EventBus",["config"],function(t){var e;return e=function(){function e(){this.callbacks=[]}return e.prototype.on=function(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e)},e.prototype.one=function(t,e){var n,r=this;return n=function(){return e(),r.off(t,n)},this.on(t,n)},e.prototype.off=function(t,e){var n,r,o,i,s,a;for(s=this.callbacks[t],a=[],r=o=0,i=s.length;i>o;r=++o)n=s[r],n===e&&a.push(this.callbacks[t].splice(r,1));return a},e.prototype.trigger=function(t,e){return this._logEvent(t,e),this.callbacks[t]?this.callbacks[t].forEach(function(t){return t.call(this,e)}):void 0},e.prototype._logEvent=function(e,n){return t.debug?console.log("> "+e,n||""):void 0},e}()})}.call(this),function(){requirejs.config({baseUrl:"."}),require(["Game","EventBus"],function(t,e){var n;return n=function(){var n,r;return n=new e,r=new t(n)},WebFont.load({google:{families:["Abel","Chango"]},active:n,fontinactive:n})})}.call(this),define("main",function(){});
//# sourceMappingURL=inversion.js.map